<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>户型详细信息</title>
		<script type="text/javascript" >
			dojoConfig = {
				parseOnLoad: true, 
				packages: [
					{
						name: "spolo",
						location: "/script/spolo"
					},
					{
						name: "scenedetail",
						location: "/modules/scenedetail"
					},
					{
						name: "widgets",
						location: "/widgets"
					}
				]
			};
		</script>
		
		<script type="text/javascript" src="/libs/dojo/dojo.js"></script>
		<script type="text/javascript" src="/system/sling.js"></script>
		<script type="text/javascript" src="/script/spolo.js"></script> 
		<script type="text/javascript" src="/libs/dijit/dijit.js"></script>
		<link rel="stylesheet" href="/libs/dijit/themes/claro/claro.css"  media="screen"/>
		<link rel="stylesheet" href="css/main.css" media="screen"/>
		<script type="text/javascript" src="/libs/sling/explorer/js/jquery-1.4.2.min.js"></script>
	</head>	
	<body class="claro">
		<div data-dojo-type="dijit/layout/ContentPane" style="width: 98%; height: 96%;" id="allbody" >
			<div data-dojo-type="dijit/layout/TabContainer" data-dojo-props="gutters:true" id="tabContainer" >
				
			</div>
		</div>
		<script type="text/javascript">
			require(
				[
					"dojo/parser",
					"dojo/ready",
					"dojo/dom",
					"dojo/dom-style",
					"dojo/query",
					"dojo/on",
					"dijit/layout/BorderContainer",
					"dijit/layout/ContentPane",
					"dijit/registry",
					"dojo/_base/array",
					"dojo/NodeList-traverse"
				],
				function(
					parser, ready, dom, domStyle, query, on, BorderContainer, ContentPane, registry, arrayUtil
				){
					ready(function(){
						var varsMap = Spolo.getUrlVars();
						var path = varsMap['modelPath'];
						var isGrant = varsMap['isGrant'];
						var page = varsMap['page'];
						
						var tabContainer = registry.byId("tabContainer");
						
						var modelBasicInformation = new ContentPane({
							 title: "基本信息",
							 id:"modelBasicInformation",
							 content: "<iframe id='iframeModelBasicInformation' width='100%' height='99%' frameborder='0' src=''></iframe>"
						});
						tabContainer.addChild(modelBasicInformation);
			
						var updateModel = new ContentPane({
							 title: "更新模型",
							 id:"updateModel",
							 content: "<iframe id='iframeUpdateModel' width='100%' height='99%' frameborder='0' src=''></iframe>"
						});
						tabContainer.addChild(updateModel);
                        
                        dom.byId("iframeModelBasicInformation").src = "modelbasicinfo.html?modelPath=" + path + "&spddk=" + path + "&isGrant=" + isGrant;
						
						var varsMap = Spolo.getUrlVars();
						var modelPath = varsMap ['modelPath'];
						var modelPathArray = modelPath.split("/");
						
						registry.byId("modelBasicInformation").watch("selected", function(){
							if(this.selected == true)
							{
								var url = "?modelPath=" + path + "&spddk=" + path + "&isGrant=" + isGrant;
								dom.byId("modelBasicInformation").innerHTML = "<iframe id=\"iframeModelBasicInformation\" width=\"100%\" height=\"99%\" frameborder=\"0\" src='modelbasicinfo.html" + url + "'></iframe>";
								dom.byId("updateModel").innerHTML = "<iframe id=\"iframeUpdateModel\" width=\"100%\" height=\"99%\" frameborder=\"0\" src=''></iframe>";
								
							}
						});
						
						registry.byId("updateModel").watch("selected", function(){
							if(this.selected == true)
							{
								var url = "?modelPath=" + path + "&spddk=" + path + "&isGrant=" + isGrant;
								dom.byId("updateModel").innerHTML = "<iframe id=\"iframeUpdateModel\" width=\"100%\" height=\"99%\" frameborder=\"0\" src='updatemodel.html" + url + "'></iframe>";
								dom.byId("modelBasicInformation").innerHTML = "<iframe id=\"iframeModelBasicInformation\" width=\"100%\" height=\"99%\" frameborder=\"0\" src=''></iframe>";
								
							}
						});
						
					});
				}
			);
		</script>
	</body>
</html>

