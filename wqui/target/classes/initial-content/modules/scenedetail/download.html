<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title></title>
	<script type="text/javascript" >
		dojoConfig = {
			parseOnLoad: true, 
			packages: [
				{
					name: "spolo",
					location: "/script/spolo"
				},
				{
					name: "scenedetail",
					location: "/modules/scenedetail"
				},
				{
					name: "widgets",
					location: "/widgets"
				}
			]
		};
	</script>
	<script type="text/javascript" src="/libs/dojo/dojo.js"></script>
	<script type="text/javascript" src="/libs/dijit/dijit.js"></script>
	<script type="text/javascript" src="/script/spolo.js"></script>
	<link rel="stylesheet" href="/libs/dijit/themes/claro/claro.css"  media="screen"/>
	<link rel="stylesheet" href="css/download.css" />
</head>
<body class="claro">
	<div data-dojo-type="dijit/layout/BorderContainer" style="width: 100; height: 100%;background-color:white;" gutters="false">	
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'" style="height:300px;">
			<br /><br /><br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			请选择您需要的文件格式：
			<br /><br />

			<div id="ocs" class="boxSelect">
				OCS 文件格式（图标）
				<div id="ocs">
					<input type="button"  class="button" id="downOCSbtn" style="width:90px; height:30px;" value="下 载" />			
				</div>
			</div>
			
			<div id="blend" class="boxSelect">
				 <div id="blendTitle" style="text-align:left;width:30%;float:left;">blend 文件格式（图标）</div>
				 <div id="littleFace" style="width:70%;float:left;margin-left:50px;margin-top:6px;"> 			 
					  <div id="noLittle" style="width:10%;float:right;">
						<input type="radio" name="face_state" id="radioTwo"  checked value="false" style="float:left;"/> <label for="radioTwo" style="float:left;">否</label> <br />		
					  </div>
					   <div id="yesLittle" style="width:10%;float:right;">
						 <input type="radio" name="face_state" id="radioOne"  value="true" style="float:left;"/> <label for="radioOne" style="float:left;">是</label> <br />
					  </div>
					   <div id="faceTXT" style="text-align:right;float:right;width:30%;">
						是否减面 : 
					  </div>
				 </div>
				<div id="blend" >
					<input type="button"  class="button" id="downBLDbtn" style="width:90px; height:30px;margin-top:15px;" value="下 载" />			
				</div>
			</div>
		</div>	
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" >	
			<div id="sceneClone">当前场景备份：</div>
			<br /><br />
			<div  class="boxSelect">
				可通过<span id="newSceneLink">新建场景</span>,上传备份的zip包来获得当前场景中的信息(图标)
				<div>
					<input type="button"  class="button" style="width:90px; height:30px;margin-top:15px;" value="开始备份" id="btnClone"/>			
				</div>
			</div>	
		</div>	
	</div>
	<script type="text/javascript">
		
		require(
			[
				"dojo/parser","dojo/ready","dojo/dom","dojo/dom-style", "dojo/query", "dojo/on",
				"dijit/form/Button"
			],function(
				parser, ready, dom, domStyle, query, on, Button
			){
				ready(function(){
					// 获取父级页面的 scene 对象
					this.scene = this.parent.scene;
					var iframe = Spolo.getRoot();
					var scene = this.scene;				
					on(dom.byId("downOCSbtn"),"click",function(){	
						this.value = "正在加载中....";	
						this.disabled = true;
						//console.log("this.parentElement.id;	",this.parentElement.id);
						scene.download("ocs");
							
					});
					on(dom.byId("downBLDbtn"),"click",function(){
					    //不是减面
						if(dom.byId("radioTwo").checked==true){
							//console.log("不是减面 ...");
							this.value = "正在加载中....";	
						    this.disabled = true;
							scene.download("blend",false);
						}
						//是减面
						if(dom.byId("radioOne").checked==true){
						      //console.log("是减面.....");
							  this.value = "正在加载中....";	
							  this.disabled = true;
							  scene.download("blend",true);
						}					
					});
					//备份场景
					on(dom.byId("btnClone"),"click",function()
					{
						Spolo.notify({
							"text" : "暂未实现，请关注Glue产品!",
							"type" : "error",
							"timeout" : 1000
						});
					});
					
					//新建场景
					on(dom.byId("newSceneLink"),"click",function()
					{
						var newSceneItem = query("#uploadScene",iframe.document)[0];//获取新建场景的id
						if(newSceneItem){
							newSceneItem.click();
						}
						else
						{
							Spolo.notify({
								"text" : "请先添加该应用！",
								"type" : "error",
								"timeout" : 1000
							});
						}
					});
				});
			}
		);
	</script>
	
	
</body>
</html>

