<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>
            修改场景名称
        </title>

		<script type="text/javascript" >
			dojoConfig = {
				parseOnLoad: true, 
				packages: [
					{
						name: "spolo",
						location: "/script/spolo"
					},
					{
						name: "scenedetail",
						location: "/modules/scenedetail"
					},
					{
						name: "widgets",
						location: "/widgets"
					}
				]
			};
		</script>
		
        <script type="text/javascript" src="/libs/dojo/dojo.js"></script>
        <script type="text/javascript" src="/libs/dijit/dijit.js"></script>
		<script type="text/javascript" src="/system/sling.js"></script> 
		<script type="text/javascript" src="/script/spolo.js"></script> 
		<script type="text/javascript" src="/libs/sling/explorer/js/jquery-1.4.2.min.js"></script>
		<link rel="stylesheet" href="/libs/dijit/themes/claro/claro.css"  media="screen"/>
		<link rel="stylesheet" href="css/update.css" media="screen" />
		<link rel="stylesheet" href="/widgets/Mask/css/main.css" media="screen">
		
		<style type="text/css">
			.inputBox{ 
				width:150px; 
				height:20px; 
				padding:5px;
			}
		</style>
		
    </head>
    
    <body class="claro">
		<div data-dojo-type="dijit.layout.BorderContainer" style="height:100%;">
			<div data-dojo-type="dijit.layout.ContentPane" region="top" style="height:60px;width:100%;">
				<br />
				修改场景名称：
				<input id="sceneName" promptMessage="请输入名称" class="inputBox" 
					data-dojo-type="dijit.form.ValidationTextBox" trim="true" value=""/>
				<input type="button" id="saveMyScenelibName" style="width:50px; height:25px;" value="保存" />					
			</div>			
		</div>
	<script type="text/javascript">
		require(
			[
				"dojo/ready","dojo/dom", "dojo/on","spolo/data/scene","dijit/form/ValidationTextBox","dijit/layout/BorderContainer","dijit/layout/ContentPane"				
			],function(
				ready, dom,on,scene_cls,ValidationTextBox,BorderContainer,ContentPane
			){
				ready(function(){
					var data = Spolo.getDialogData();
					var scenepath = data["scenepath"];
					var window = data["window"];
					var name = data["scenename"];
					dijit.byId("sceneName").set("value",name);					
					var scene = scene_cls(scenepath);				
					
					on(dom.byId("saveMyScenelibName"),"click",function(){						
						var scene_name = dijit.byId("sceneName").value;
						if(scene_name){
						scene.setSceneName(scene_name,
								function(){									
									Spolo.dialogEmit("sceneRenameSuccess",scene_name);
									Spolo.dialogHide();
								},
								function(){
									console.log("修改失败");
								}
							); 
						}
					});
				});
			}
		);
	</script>	
    </body>
</html>