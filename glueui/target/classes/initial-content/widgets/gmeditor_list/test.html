<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<title>Glue</title>
		
		<script type="text/javascript">
			var dojoConfig = {
				parseOnLoad: true, 
				packages:[
					{
						name: "spolo",
						location: "/script/spolo"
					},
					{
						name: "widgets",
						location: "/widgets"
					}
				]
			};
		</script>
		<script type="text/javascript" src="/libs/dojo/dojo.js"></script>
		<script type="text/javascript" src="/libs/dijit/dijit.js"></script>
		<link rel="stylesheet" href="/libs/dijit/themes/claro/claro.css" media="screen">
		<link rel="stylesheet" href="css/main.css" media="screen">
		<link rel="stylesheet" href="../gmeditor_listItem/css/main.css" media="screen">
		<script type="text/javascript" src="/widgets/gmeditor_list/gmeditor_list.js"></script>
		<script type="text/javascript" src="/widgets/gmeditor_listItem/gmeditor_listItem.js"></script>
		<style type="text/css">
			html,body{
				height:100%;
			}
		</style>
	</head>
	
	<body class="claro">	
		<button id="SelectAll">全选</button>
		<button id="SelectNone">取消</button>
		<button id="add">添加</button>
		<button id="removeItem">删除</button>
		<button id="orderItem">暂停</button>
		<div id="testContainer"></div>
	
	<script language='javascript'>
			
	require(["widgets/gmeditor_list/gmeditor_list", 
					 "widgets/gmeditor_listItem/gmeditor_listItem",
					 "dojo/dom",
					 "dojo/on"
					 ],
		function(JobList,JobListItem,dom,on){
				this.jobList = new JobList();
				this.jobList.placeAt("testContainer");
				on(dom.byId("add"),"click",function(){
					addItem();
									
				});
				on(dom.byId("getSelected"),"click",function(){
					getSelected();	
				});
				on(dom.byId("SelectAll"),"click",function(){
					selectedAll();
				});
				on(dom.byId("SelectNone"),"click",function(){
					SelectNone();				
				});
				on(dom.byId("removeItem"),"click",function(){
					removeItem();				
				});
				on(dom.byId("orderItem"),"click",function(){
											
				});

				function addItem(){		
					var o = new Object();
						o.start= function(){
							alert(" It is start");
						};
						o.stop= function(){
							alert(" She is stop");
						};
						o.progress= function(){
							alert(" He is progress");
					};					
					var json = {
							"id": Math.random()*10,
							"type":"MESH",
							"name":Math.random()*10
						};
					var item = new JobListItem(json);
					var new_one = this.jobList.addJobListItem(item);							
				};
				function getSelected(){
					var jobs = this.jobList.getSelectedItem();
					for(var job in jobs){
						var itemname = jobs[job].name;
						alert(itemname);
					}
				};
				function selectedAll(){
					this.jobList.orSelectAllItem(true);
				}
				function SelectNone(){
					this.jobList.orSelectAllItem(false);
				}
				function removeItem(){
					this.jobList.removeSelectedItem();
				}
		}
	);			
		</script>
	</body>	
</html>
