<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Widget Template</title>
        <!-- 禁止使用 dojo css 样式 -->
        <script type="text/javascript" >
			dojoConfig = {packages: [
                    {
						name: "modules",
						location: "/modules"
					},
					{
						name: "spolo",
						location: "/script/spolo"
					},
                    {
						name: "widgets",
						location: "/widgets"
					}]};
		</script>
		<script type="text/javascript" src="/libs/dojo/dojo.js"></script>
		<script type="text/javascript" src="/libs/jquery/jquery.js"></script>
        

    </head>
    <body>
        
        <div id="widget_placeAt" style="width:800px;"></div>
       

        <script type="text/javascript" >
            //  注意：需要引入正确的Widgert

            // 测试引入 Waterfall Widget
            require(["dojo/ready","dojo/on","widgets/Dialog/main","widgets/WaterFall/main","widgets/PulldownMenu/main"], function(ready,on,dialog,Waterfall,PulldownMenu){
             
                ready(function(){
                   
                   // 创建 dialog 对象 
                   var dl = new dialog();
                   dl.placeAt("widget_placeAt");
                   dl.startup(); // 启动 dialog
                   
                   /**
                    dialog_open，打开dialog窗口，方法包括2个参数，分别是 animation 和 style
                    animation : 0 - 4 , 0默认没有动画
                    style : 0 - 4 , 0是默认和1一样的样式
                   */
                   dl.dialog_open(2,3);
                   
                   // 关闭dialog
                   // dl.dialog_close();
                   
                   

                  
                  // 将WaterFall Widget 引入到Dialog中 在使用WsterFall Widget时，不能够设置Dialog的高度。
                  var dataList = [];
                  var fieldsList = {
                      "Author" : "baidubaidubaidubaidu",
                      "Date" : "2013/6/19",
                      "Person" : "liushishi"
                  }
                  for(var i=0;i<15;i++){
                      var json = {
                          "id" : parseInt( Math.random()*50 ),
                          "img" : "/widgets/WaterFall/img/shishi.jpg",
                          "fields" : fieldsList,
                          "button" : "点击下载"
                      }
                      dataList.push(json);
                  }
                  var waterfall_ref = new Waterfall();
                  waterfall_ref.initData(dataList,15);

                  // 这个json还存在一些问题，width应该可以设置100px，当然也可以设置100% 需要处理一下
                  var waterfall_style_json = {
                      left : 50,
                      top : 0,
                      width : 800
                  }

                  dl.injectWidget(waterfall_ref,waterfall_style_json);
                   
                  on(waterfall_ref,"picClick", function(data){
                      console.log(data);
                  });
                  

                  /*
                  var array =new Array();
                  array[0]="我的效果图";       
                  var pdm_json = {
                      left : 10,
                      top : 0,
                      width : 100,
                      height : 100 
                  }
                 
                  var pdm = new PulldownMenu(array);
                  dl.injectWidget(pdm,pdm_json);             
                  pdm.createMenu();
                  //捕获a的点击事件
                  on(pdm,"aOnClick",function(node){
                    console.log(node);          
                  });
              
                  */

                  // 设置dialog是否是 模式化，false：非模式化，true模式化，如果不添加参数，默认为非模式化
                  // 模式化需要在Widget加载完成后设置
                  dl.isMode(true);

				});
                
			});
            
        </script>
    </body>
</html>